@model Vote2.ViewModels.UserAnswerVotesViewModel;

<div class="row" style="margin: 10px 0;">
    <div class="col-md-4 row justify-content-center align-items-center">
        Hello | @Model.UserName
    </div>
    <div class="col-md-8 row justify-content-center align-items-center">
        <div id="flipdown" class="flipdown" data-end-date="@Model.VoteEndDate"></div>
    </div>
</div>

<div class="row justify-content-center" style="margin: 40px 0;">
    <div class="col-md-6 text-center">
        <h1 class="VoteName">@Model.VoteName</h1>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-md-8 Vote-Con">
        <form asp-action="Vote" asp-controller="UserVotes" method="post">
            <input asp-for="VoteId" hidden />
            <input asp-for="UserId" hidden />
            @{
                int Counter = 1;
            }
            @for (int i = 0; i < Model.VoteQuestionsList.Count; i++)
            {
                @*<input id="QuestionId-@Model.VoteQuestionsList[i].Id" asp-for="VoteQuestionsList[i].Id" name="@Model.VoteQuestionsList[i].Id" hidden />*@
                <input id="QuestionId-@Model.VoteQuestionsList[i].Id" asp-for="VoteQuestionsList[i].Id" name="VoteQuestionsList[@i].Id" hidden />
                <div class="Question-Con row">
                    <div class="row col-md-12 Question-Row">
                        <div class="col-sm-12 row Question">
                            <span>@Counter.</span><span>@Model.VoteQuestionsList[i].QuestionName</span>
                             
                        </div>
                    </div>

                    @if (Model.VoteQuestionsList[i].QuestionTypeId == 2) //Choice
                    {
                        <div class="row col-md-12 Answer-container">
                            @for (int x = 0; x < Model.VoteQuestionsList[i].VoteQuestionsAnswersList.Count; x++)
                            {
                                @*<input id="QuestionId-@Model.VoteQuestionsList[i].VoteQuestionsAnswersList[x].Id" asp-for="VoteQuestionsList[i].VoteQuestionsAnswersList[x].Id"
                                    name="@Model.VoteQuestionsList[i].VoteQuestionsAnswersList[x].Id" hidden />*@
                                <label>
                                    <input type="radio" asp-for="VoteQuestionsList[i].SelectedAnswerId"
                                           name="VoteQuestionsList[@i].SelectedAnswerId"
                                           value="@Model.VoteQuestionsList[i].VoteQuestionsAnswersList[x].Id">
                                    <span>@Model.VoteQuestionsList[i].VoteQuestionsAnswersList[x].AnswerName</span>
                                </label>
                            }
                        </div>

                    }
                    else
                    {
                        <div class="row col-md-12 Answer-container">
                            <textarea asp-for="VoteQuestionsList[i].AnswerText" class="form-control"></textarea>
                        </div>
                    }

                </div>
                Counter++;
            }
            <div class="row justify-content-center">
                <button class="animated-button" type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" class="arr-2" viewBox="0 0 24 24">
                        <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                    </svg>
                    <span class="text">Send Vote</span>
                    <span class="circle"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="arr-1" viewBox="0 0 24 24">
                        <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                    </svg>
                </button>
            </div>
        </form>
    </div>
</div>

<link href="~/CSS/UserVotes.css" rel="stylesheet" />

<script>
    $(document).ready(function () {
        $('.flipdown').each(function (index, element) {
            const endDate = $(element).data('end-date');
            const endDateUnix = new Date(endDate).getTime() / 1000;

            new FlipDown(endDateUnix, element.id).start();
        });
    });
</script>